### Задание 1
Возврат функции to_tsvector для строки "Съешь ещё этих мягких французских булок, да выпей чаю"
```sql
 SELECT to_tsvector('Съешь ещё этих мягких французских булок, да выпей чаю');
                              to_tsvector
 'булок':6 'вып':8 'ещ':2 'мягк':4 'съеш':1 'французск':5 'ча':9 'эт':3
```
В векторе нет слова "да" так как оно является стоп-словом. Стоп-словами называются слова, которые встречаются очень часто, практически в каждом документе, и поэтому не имеют различительной ценности. Таким образом, при полнотекстовом поиске их можно игнорировать.
Для русского языка они содержатся в файле russian.stop 
![часть файла russian.stop](https://thumb.cloud.mail.ru/weblink/thumb/xw1/4VK9/9g1ni8P48/Fx.jpg?x-email=sanek_buh%40mail.ru)

### Задание 2
Сиволы "@@" выполняют полнотекстовый поиск, позволяя не использовать индекс.
to_tsquery нормализует переданные в функцию фрагменты, приводя их к лексемам. 
Для слова fox to_tsquery возвращает лексему fox.
```sql
SELECT to_tsquery('fox');
 to_tsquery
------------
 'fox'
```
Для слова foxes to_tsquery возвращает также лексему fox.
```sql
SELECT to_tsquery('foxes');
 to_tsquery
------------
 'fox'
```
Для слова foxhound to_tsquery возвращает также лексему foxhound.
```sql
SELECT to_tsquery('foxhound');
 to_tsquery
------------
 'foxhound'
```
Поэтому первый и второй запрос возвращают true, а третий не возвращает.

Выполнив завпрос 
```sql
SELECT to_tsvector('Russian', 'Съешь ещё этих мягких французских булок, да выпей чаю.')
    @@ to_tsquery('Russian','булка');
```
было получено false, что говорит нам о том что слова "булка" и "булок" имеют разные лексемы. Это можно подтвержить при помощи функции ts_lexize.
```sql
select ts_lexize('russian_stem', 'булок');
 ts_lexize
-----------
 {булок}
```
```sql
select ts_lexize('russian_stem', 'булка');
 ts_lexize
-----------
 {булк}
```

Затем была произведена замена слова "булок", на слово "пирожков" и выполнены запросы
```sql
SELECT to_tsvector('Russian', 'Съешь ещё этих мягких французских пирожков, да выпей чаю.') @@ to_tsquery('Russian','пирожки');
 ?column?
----------
 t
```
```sql
SELECT to_tsvector('Russian', 'Съешь ещё этих мягких французских пирожков, да выпей чаю.') @@ to_tsquery('Russian','пирожок');
 ?column?
----------
 f
```

Первый запрос возвратил true так как слово "пирожки" имеет лексему "пирожк" также как и слово "пирожков".
```sql
postgres=# select ts_lexize('russian_stem', 'пирожки');
 ts_lexize
-----------
 {пирожк}
```
```sql
postgres=# select ts_lexize('russian_stem', 'пирожков');
 ts_lexize
-----------
 {пирожк}
```

Второй запрос возвратил false так как слово "пирожок" имеет лексему "пирожок" и не совпадает с лексемой слова "пирожки"
```sql
postgres=# select ts_lexize('russian_stem', 'пирожок');
 ts_lexize
-----------
 {пирожок}
```

### Задание 3
Запросы с логическими операторами на русском
```sql
SELECT to_tsvector('Веселый дельфин плещется в море вместе с селёдкой') @@ to_tsquery('дельфин & селедка');
 ?column?
----------
 t
```

```sql
SELECT to_tsvector('Веселый дельфин плещется в море вместе с селёдкой') @@ to_tsquery('дельфин | вобла');
 ?column?
----------
 t
```


```sql
SELECT to_tsvector('Веселый дельфин плещется в море вместе с селёдкой') @@ to_tsquery('!вобла');
 ?column?
----------
 t
```

```sql
SELECT to_tsvector('Веселый дельфин плещется в море вместе с селёдкой') @@ to_tsquery('дельфин & (селедка | вобла) & !черепаха');
 ?column?
----------
 t
```

По умолчанию используется анализатор, который задан в конфигурации сервера параметром default_text_search_config, задающий имя конфигурации текстового поиска по умолчанию. Данная конфигурация будет использоваться если аргумент не определен. Встроенное значение в конфигурации default_text_search_config является pg_catalog.simple, но при инициализации базы данных в этот файл конфигурации сервера записывается значение, соответствующее выбранной локали lc_ctype, если конечно удастся найти такую конфигурацию текстового поиска. Конфигурации текстового посика существующих в postgresql
![Конфигурации текстового посика существующих в postgresql](https://thumb.cloud.mail.ru/weblink/thumb/xw1/JkxS/GtUvMbk3Q/wentodor.jpg?x-email=sanek_buh%40mail.ru)
 
### Задание 4
Число 2 в операторе <-> означает расстояние между словами в поисковой фразе
Запрос был модифицирован для поиска фразы "съешь ещё"
```sql
SELECT to_tsvector('Съешь ещё этих мягких французских булок, да выпей чаю.') @@ to_tsquery('съешь<1>ещё');
 ?column?
----------
 t
```

phraseto_tsquery преобразует неформатированный текст запроса в значение tsquery. Текст разбирается и нормализуется подобно тому как это делает to_tsvector, а затем между оставшимися словами вставляется оператор <-> (предшествует).
Данная функция полезна при точном поиске последовательностей лексем.

### Задание 5
ts_debug - выводит информацию обо всех фрагментах данного документа, которые были выданы анализатором и обработаны настроенными словарями.
Пример использования функции ts_debug
```sql
SELECT * FROM ts_debug('Веселый дельфин плещется в море вместе с селёдкой');
 alias |    description    |  token   |  dictionaries  |  dictionary  |  lexemes
-------+-------------------+----------+----------------+--------------+-----------
 word  | Word, all letters | Веселый  | {russian_stem} | russian_stem | {весел}
 blank | Space symbols     |          | {}             |              |
 word  | Word, all letters | дельфин  | {russian_stem} | russian_stem | {дельфин}
 blank | Space symbols     |          | {}             |              |
 word  | Word, all letters | плещется | {russian_stem} | russian_stem | {плещет}
 blank | Space symbols     |          | {}             |              |
 word  | Word, all letters | в        | {russian_stem} | russian_stem | {}
 blank | Space symbols     |          | {}             |              |
 word  | Word, all letters | море     | {russian_stem} | russian_stem | {мор}
 blank | Space symbols     |          | {}             |              |
 word  | Word, all letters | вместе   | {russian_stem} | russian_stem | {вмест}
 blank | Space symbols     |          | {}             |              |
 word  | Word, all letters | с        | {russian_stem} | russian_stem | {}
 blank | Space symbols     |          | {}             |              |
 word  | Word, all letters | селёдкой | {russian_stem} | russian_stem | {селедк}
```

ts_headline - принимает документ вместе с запросом и возвращает выдержку из документа, в которой выделяются слова из запроса. 
Пример использования функции ts_headline
```sql
SELECT ts_headline('Веселый дельфин плещется в море вместе с селёдкой',to_tsquery('дельфин & селёдка'));
                           ts_headline
-----------------------------------------------------------------
 Веселый <b>дельфин</b> плещется в море вместе с <b>селёдкой</b>
```
